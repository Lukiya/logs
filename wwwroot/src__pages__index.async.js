"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[858],{50882:function(q,Z,r){r.r(Z),r.d(Z,{LOCAL_API_ROOT:function(){return I},default:function(){return X}});var S=r(30279),T=r.n(S),B=r(46686),U=r.n(B),K=r(35290),m=r.n(K),N=r(411),P=r.n(N),F=r(57786),z=r(82029),o=r(6530),c=r(3234),y=r(32417),$=r(55199),A=r(14543),G=r(1570),w=r(67107),k=r(98777),C=r.n(k),W=r(93236),e=r(62086),Y=!0,I=Y?"/api":"http://localhost:7160/api",b=F.Z.Text,J=z.Z.RangePicker,V=[{title:"Level",render:function(n,l){switch(l.Level){case 0:return(0,e.jsx)(b,{type:"secondary",children:"Verbose"});case 1:return(0,e.jsx)(b,{type:"secondary",children:"Debug"});case 2:return(0,e.jsx)(b,{children:"Info"});case 3:return(0,e.jsx)(b,{type:"warning",children:"Warning"});case 4:return(0,e.jsx)(b,{type:"danger",children:"Error"});case 5:return(0,e.jsx)(b,{type:"danger",children:"Fatal"});default:return(0,e.jsx)(b,{type:"secondary",children:"Unknown"})}},align:"center",width:60,responsive:["sm"]},{title:"Message",dataIndex:"Message"},{title:"User",dataIndex:"User",width:100,responsive:["lg"]},{title:"TraceNo",dataIndex:"TraceNo",align:"center",width:150,responsive:["xl"]},{title:"Date",align:"center",width:170,render:function(n,l){return C()(l.CreatedOnUtc).local().format("MM/DD/YYYY hh:mm:ss A")},responsive:["md"]}],H=function(){var p=P()(m()().mark(function n(l,a){var d,h,E,M,s,j,D,v,t,_,u,g,f,i,R;return m()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return M=l.current,s=l.pageSize,j=I+"/logs",D={PageSize:s,PageIndex:M,DBName:a.DBName,TableName:a.TableName,User:(d=a.User)===null||d===void 0?void 0:d.trim(),TraceNo:(h=a.TraceNo)===null||h===void 0?void 0:h.trim(),Message:(E=a.Message)===null||E===void 0?void 0:E.trim(),StartTime:"",EndTime:"",Level:a.Level,Flags:0},v=a.DateRange,(v==null?void 0:v.length)==2&&(t=v[0],_=v[1],t&&(u=C()(t),D.StartTime=u.startOf("day").utc().format()),_&&(g=C()(_),D.EndTime=g.startOf("day").utc().format())),a.FuzzySearch&&(D.Flags|=1),console.log(D),O.next=9,fetch(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});case 9:return f=O.sent,O.next=12,f.text();case 12:return i=O.sent,R=JSON.parse(i),O.abrupt("return",{list:R.LogEntries,total:R.TotalCount});case 15:case"end":return O.stop()}},n)}));return function(l,a){return p.apply(this,arguments)}}();function L(p,n){return x.apply(this,arguments)}function x(){return x=P()(m()().mark(function p(n,l){var a,d,h,E;return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=I+"/listData?client=".concat(n,"&db=").concat(l),s.next=3,fetch(a);case 3:return d=s.sent,s.next=6,d.text();case 6:return h=s.sent,E=JSON.parse(h),s.abrupt("return",E);case 9:case"end":return s.stop()}},p)})),x.apply(this,arguments)}var Q=function(n,l){var a,d,h,E=o.Z.useForm(),M=U()(E,1),s=M[0],j=(0,w.Z)(H,{defaultPageSize:10,form:s,manual:!0}),D=j.tableProps,v=j.search;return(0,e.jsxs)("div",{children:[(0,e.jsxs)(o.Z,{form:s,layout:"inline",size:"small",initialValues:{Level:-1,DateRange:[C()().subtract(1,"M"),null]},children:[(0,e.jsx)(o.Z.Item,{name:"Client",rules:[{required:!0,message:"Client is required"}],children:(0,e.jsx)(c.Z,{placeholder:"Client",dropdownMatchSelectWidth:!1,onChange:function(){var t=P()(m()().mark(function _(u){var g;return m()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,L(u,"");case 2:g=i.sent,s.resetFields(["DBName","TableName"]),l(T()(T()({},g),{},{Client:u,Database:"",Table:""}));case 5:case"end":return i.stop()}},_)}));return function(_){return t.apply(this,arguments)}}(),options:n==null||(a=n.Clients)===null||a===void 0?void 0:a.map(function(t){return{label:t,value:t}})})}),(0,e.jsx)(o.Z.Item,{name:"DBName",rules:[{required:!0,message:"Database is required"}],children:(0,e.jsx)(c.Z,{placeholder:"Database",dropdownMatchSelectWidth:!1,onChange:function(){var t=P()(m()().mark(function _(u){var g;return m()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,L(n.Client,u);case 2:g=i.sent,s.resetFields(["TableName"]),l(T()(T()({},g),{},{Database:u}));case 5:case"end":return i.stop()}},_)}));return function(_){return t.apply(this,arguments)}}(),options:n==null||(d=n.Databases)===null||d===void 0?void 0:d.map(function(t){return{label:t,value:t}})})}),(0,e.jsx)(o.Z.Item,{name:"TableName",rules:[{required:!0,message:"Table is required"}],children:(0,e.jsx)(c.Z,{placeholder:"Table",dropdownMatchSelectWidth:!1,onChange:function(){var t=P()(m()().mark(function _(u){return m()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:l(T()(T()({},n),{},{Table:u}));case 1:case"end":return f.stop()}},_)}));return function(_){return t.apply(this,arguments)}}(),options:(h=n.Tables)===null||h===void 0?void 0:h.map(function(t){return{label:t,value:t}})})}),(0,e.jsx)(o.Z.Item,{name:"Level",children:(0,e.jsxs)(c.Z,{placeholder:"Level",dropdownMatchSelectWidth:!1,children:[(0,e.jsx)(c.Z.Option,{value:-1,children:"All"}),(0,e.jsx)(c.Z.Option,{value:0,children:"Verbose"}),(0,e.jsx)(c.Z.Option,{value:1,children:"Debug"}),(0,e.jsx)(c.Z.Option,{value:2,children:"Info"}),(0,e.jsx)(c.Z.Option,{value:3,children:"Warning"}),(0,e.jsx)(c.Z.Option,{value:4,children:"Error"}),(0,e.jsx)(c.Z.Option,{value:5,children:"Fatal"})]})}),(0,e.jsx)(o.Z.Item,{name:"Message",children:(0,e.jsx)(y.Z,{placeholder:"Message"})}),(0,e.jsx)(o.Z.Item,{name:"User",children:(0,e.jsx)(y.Z,{placeholder:"User"})}),(0,e.jsx)(o.Z.Item,{name:"TraceNo",children:(0,e.jsx)(y.Z,{placeholder:"TraceNo"})}),(0,e.jsx)(o.Z.Item,{name:"DateRange",rules:[{validator:function(_,u){return!u||!u[0]?Promise.reject(new Error("Start date is required")):Promise.resolve()}}],children:(0,e.jsx)(J,{allowEmpty:[!0,!0]})}),(0,e.jsx)(o.Z.Item,{name:"FuzzySearch",valuePropName:"checked",children:(0,e.jsx)($.Z,{checkedChildren:"Fuzzy",unCheckedChildren:"Fuzzy"})}),(0,e.jsxs)(o.Z.Item,{children:[(0,e.jsx)(A.Z,{type:"primary",htmlType:"submit",style:{marginRight:20},onClick:v.submit,children:"Search"}),(0,e.jsx)(A.Z,{onClick:v.reset,children:"Reset"})]})]}),(0,e.jsx)("br",{}),(0,e.jsx)(G.Z,T()({rowKey:"ID",size:"small",columns:V,scroll:{x:!0}},D))]})};function X(){var p=(0,W.useState)({Client:"",Database:"",Table:"",Clients:[],Databases:[],Tables:[]}),n=U()(p,2),l=n[0],a=n[1];return(0,W.useEffect)(function(){L("","").then(function(d){a(d)})},[]),Q(l,a)}}}]);
