"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[858],{50882:function(te,Z,n){n.r(Z),n.d(Z,{LOCAL_API_ROOT:function(){return I},default:function(){return ae}});var B=n(30279),T=n.n(B),S=n(46686),U=n.n(S),K=n(35290),h=n.n(K),N=n(411),M=n.n(N),F=n(57786),z=n(82029),$=n(90095),_=n(18446),c=n(3234),y=n(32417),w=n(16466),G=n(55199),A=n(29236),k=n(72630),Y=n(67107),J=n(98777),C=n.n(J),W=n(93236),V=n(9878),H=n.n(V),e=n(62086),Q=!0,I=Q?"/api":"http://localhost:7160/api",P=F.Z.Text,X=z.Z.RangePicker,q=[{title:"Level",render:function(r,a){switch(a.Level){case 0:return(0,e.jsx)(P,{type:"secondary",children:"Verbose"});case 1:return(0,e.jsx)(P,{type:"secondary",children:"Debug"});case 2:return(0,e.jsx)(P,{children:"Info"});case 3:return(0,e.jsx)(P,{type:"warning",children:"Warning"});case 4:return(0,e.jsx)(P,{type:"danger",children:"Error"});case 5:return(0,e.jsx)(P,{type:"danger",children:"Fatal"});default:return(0,e.jsx)(P,{type:"secondary",children:"Unknown"})}},align:"center",width:60,responsive:["sm"]},{title:"Message",render:function(r,a){return(0,e.jsx)("a",{onClick:function(){return ee(a)},children:a.Message})}},{title:"User",dataIndex:"User",width:100,responsive:["lg"]},{title:"TraceNo",dataIndex:"TraceNo",align:"center",width:150,responsive:["xl"]},{title:"Date",align:"center",width:170,render:function(r,a){return C()(a.CreatedOnUtc).local().format("MM/DD/YYYY hh:mm:ss A")},responsive:["md"]}],ee=function(r){var a=(0,e.jsx)(H(),{src:r,theme:"monokai",iconStyle:"circle",displayDataTypes:!1});$.Z.info({icon:null,closable:!0,maskClosable:!0,content:a,width:"100%"})},ne=function(){var m=M()(h()().mark(function r(a,t){var d,v,D,j,s,b,g,p,l,o,u,E,f,i,R;return h()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return j=a.current,s=a.pageSize,b=I+"/logs",g={PageSize:s,PageIndex:j,DBName:t.DBName,TableName:t.TableName,User:(d=t.User)===null||d===void 0?void 0:d.trim(),TraceNo:(v=t.TraceNo)===null||v===void 0?void 0:v.trim(),Message:(D=t.Message)===null||D===void 0?void 0:D.trim(),StartTime:"",EndTime:"",Level:t.Level,Flags:0},p=t.DateRange,(p==null?void 0:p.length)==2&&(l=p[0],o=p[1],l&&(u=C()(l),g.StartTime=u.startOf("day").utc().format()),o&&(E=C()(o),g.EndTime=E.startOf("day").utc().format())),t.FuzzySearch&&(g.Flags|=1),console.log(g),O.next=9,fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});case 9:return f=O.sent,O.next=12,f.text();case 12:return i=O.sent,R=JSON.parse(i),O.abrupt("return",{list:R.LogEntries,total:R.TotalCount});case 15:case"end":return O.stop()}},r)}));return function(a,t){return m.apply(this,arguments)}}();function L(m,r){return x.apply(this,arguments)}function x(){return x=M()(h()().mark(function m(r,a){var t,d,v,D;return h()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=I+"/listData?client=".concat(r,"&db=").concat(a),s.next=3,fetch(t);case 3:return d=s.sent,s.next=6,d.text();case 6:return v=s.sent,D=JSON.parse(v),s.abrupt("return",D);case 9:case"end":return s.stop()}},m)})),x.apply(this,arguments)}var re=function(r,a){var t,d,v,D=_.Z.useForm(),j=U()(D,1),s=j[0],b=(0,Y.Z)(ne,{defaultPageSize:10,form:s,manual:!0}),g=b.tableProps,p=b.search;return(0,e.jsxs)("div",{children:[(0,e.jsxs)(_.Z,{form:s,layout:"inline",size:"small",initialValues:{Level:-1,DateRange:[C()().subtract(1,"M"),null]},children:[(0,e.jsx)(_.Z.Item,{name:"Client",rules:[{required:!0,message:"Client is required"}],children:(0,e.jsx)(c.Z,{placeholder:"Client",dropdownMatchSelectWidth:!1,onChange:function(){var l=M()(h()().mark(function o(u){var E;return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,L(u,"");case 2:E=i.sent,s.resetFields(["DBName","TableName"]),a(T()(T()({},E),{},{Client:u,Database:"",Table:""}));case 5:case"end":return i.stop()}},o)}));return function(o){return l.apply(this,arguments)}}(),options:r==null||(t=r.Clients)===null||t===void 0?void 0:t.map(function(l){return{label:l,value:l}})})}),(0,e.jsx)(_.Z.Item,{name:"DBName",rules:[{required:!0,message:"Database is required"}],children:(0,e.jsx)(c.Z,{placeholder:"Database",dropdownMatchSelectWidth:!1,onChange:function(){var l=M()(h()().mark(function o(u){var E;return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,L(r.Client,u);case 2:E=i.sent,s.resetFields(["TableName"]),a(T()(T()({},E),{},{Database:u}));case 5:case"end":return i.stop()}},o)}));return function(o){return l.apply(this,arguments)}}(),options:r==null||(d=r.Databases)===null||d===void 0?void 0:d.map(function(l){return{label:l,value:l}})})}),(0,e.jsx)(_.Z.Item,{name:"TableName",rules:[{required:!0,message:"Table is required"}],children:(0,e.jsx)(c.Z,{placeholder:"Table",dropdownMatchSelectWidth:!1,onChange:function(){var l=M()(h()().mark(function o(u){return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a(T()(T()({},r),{},{Table:u}));case 1:case"end":return f.stop()}},o)}));return function(o){return l.apply(this,arguments)}}(),options:(v=r.Tables)===null||v===void 0?void 0:v.map(function(l){return{label:l,value:l}})})}),(0,e.jsx)(_.Z.Item,{name:"Level",children:(0,e.jsxs)(c.Z,{placeholder:"Level",dropdownMatchSelectWidth:!1,children:[(0,e.jsx)(c.Z.Option,{value:-1,children:"All"}),(0,e.jsx)(c.Z.Option,{value:0,children:"Verbose"}),(0,e.jsx)(c.Z.Option,{value:1,children:"Debug"}),(0,e.jsx)(c.Z.Option,{value:2,children:"Info"}),(0,e.jsx)(c.Z.Option,{value:3,children:"Warning"}),(0,e.jsx)(c.Z.Option,{value:4,children:"Error"}),(0,e.jsx)(c.Z.Option,{value:5,children:"Fatal"})]})}),(0,e.jsx)(_.Z.Item,{name:"Message",children:(0,e.jsx)(y.Z,{placeholder:"Message"})}),(0,e.jsx)(_.Z.Item,{name:"User",children:(0,e.jsx)(y.Z,{placeholder:"User"})}),(0,e.jsx)(_.Z.Item,{name:"TraceNo",children:(0,e.jsx)(y.Z,{placeholder:"TraceNo"})}),(0,e.jsx)(_.Z.Item,{name:"Flags",children:(0,e.jsx)(w.Z,{placeholder:"Flags"})}),(0,e.jsx)(_.Z.Item,{name:"DateRange",rules:[{validator:function(o,u){return!u||!u[0]?Promise.reject(new Error("Start date is required")):Promise.resolve()}}],children:(0,e.jsx)(X,{allowEmpty:[!0,!0]})}),(0,e.jsx)(_.Z.Item,{name:"FuzzySearch",valuePropName:"checked",children:(0,e.jsx)(G.Z,{checkedChildren:"Fuzzy",unCheckedChildren:"Fuzzy"})}),(0,e.jsxs)(_.Z.Item,{children:[(0,e.jsx)(A.Z,{type:"primary",htmlType:"submit",style:{marginRight:20},onClick:p.submit,children:"Search"}),(0,e.jsx)(A.Z,{onClick:p.reset,children:"Reset"})]})]}),(0,e.jsx)("br",{}),(0,e.jsx)(k.Z,T()({rowKey:"ID",size:"small",columns:q,scroll:{x:!0}},g))]})};function ae(){var m=(0,W.useState)({Client:"",Database:"",Table:"",Clients:[],Databases:[],Tables:[]}),r=U()(m,2),a=r[0],t=r[1];return(0,W.useEffect)(function(){L("","").then(function(d){t(d)})},[]),re(a,t)}}}]);
