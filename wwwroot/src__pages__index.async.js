"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[858],{50882:function(se,Z,n){n.r(Z),n.d(Z,{LOCAL_API_ROOT:function(){return L},default:function(){return te}});var B=n(30279),T=n.n(B),K=n(46686),U=n.n(K),S=n(35290),v=n.n(S),N=n(411),j=n.n(N),F=n(97680),z=n(76160),$=n(54679),u=n(85303),h=n(3234),C=n(94874),w=n(49553),G=n(55199),A=n(29236),Y=n(48250),k=n(1959),J=n(67107),V=n(98777),b=n.n(V),W=n(93236),H=n(9878),Q=n.n(H),e=n(62086),X=!0,L=X?"/api":"http://localhost:7160/api",i=F.Z.Text,q=z.Z.RangePicker,ee=[{title:"Level",render:function(a,r){switch(r.Level){case 0:return(0,e.jsx)(i,{type:"secondary",children:"Verbose"});case 1:return(0,e.jsx)(i,{type:"secondary",children:"Debug"});case 2:return(0,e.jsx)(i,{children:"Info"});case 3:return(0,e.jsx)(i,{type:"warning",children:"Warning"});case 4:return(0,e.jsx)(i,{type:"danger",children:"Error"});case 5:return(0,e.jsx)(i,{type:"danger",children:"Fatal"});default:return(0,e.jsx)(i,{type:"secondary",children:"Unknown"})}},align:"center",width:60,responsive:["sm"]},{title:"Message",render:function(a,r){switch(r.Level){case 0:return(0,e.jsx)(i,{type:"secondary",children:r.Message});case 1:return(0,e.jsx)(i,{type:"secondary",children:r.Message});case 2:return(0,e.jsx)(i,{children:r.Message});case 3:return(0,e.jsx)(i,{type:"warning",children:r.Message});case 4:return(0,e.jsx)(i,{type:"danger",children:r.Message});case 5:return(0,e.jsx)(i,{type:"danger",children:r.Message});default:return(0,e.jsx)(i,{type:"secondary",children:r.Message})}}},{title:"User",dataIndex:"User",width:100,responsive:["lg"]},{title:"TraceNo",dataIndex:"TraceNo",align:"center",width:150,responsive:["xl"]},{title:"Date",align:"center",width:170,render:function(a,r){return b()(r.CreatedOnUtc).local().format("MM/DD/YYYY hh:mm:ss A")},responsive:["md"]},{align:"center",width:32,render:function(a,r){return(0,e.jsx)("a",{onClick:function(){return ne(r)},children:(0,e.jsx)(k.Z,{})})}}],ne=function(a){var r=(0,e.jsx)(Q(),{src:a,theme:"monokai",iconStyle:"circle",displayDataTypes:!1});$.Z.info({icon:null,closable:!0,maskClosable:!0,content:r,width:"100%"})},re=function(){var c=j()(v()().mark(function a(r,t){var m,p,D,P,l,y,f,g,s,o,d,E,O,_,R;return v()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return P=r.current,l=r.pageSize,y=L+"/logs",f={PageSize:l,PageIndex:P,DBName:t.DBName,TableName:t.TableName,User:(m=t.User)===null||m===void 0?void 0:m.trim(),TraceNo:(p=t.TraceNo)===null||p===void 0?void 0:p.trim(),Message:(D=t.Message)===null||D===void 0?void 0:D.trim(),StartTime:"",EndTime:"",Level:t.Level,Flags:0},g=t.DateRange,(g==null?void 0:g.length)==2&&(s=g[0],o=g[1],s&&(d=b()(s),f.StartTime=d.startOf("day").utc().format()),o&&(E=b()(o),f.EndTime=E.startOf("day").utc().format())),t.FuzzySearch&&(f.Flags|=1),console.log(f),M.next=9,fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});case 9:return O=M.sent,M.next=12,O.text();case 12:return _=M.sent,R=JSON.parse(_),M.abrupt("return",{list:R.LogEntries,total:R.TotalCount});case 15:case"end":return M.stop()}},a)}));return function(r,t){return c.apply(this,arguments)}}();function I(c,a){return x.apply(this,arguments)}function x(){return x=j()(v()().mark(function c(a,r){var t,m,p,D;return v()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=L+"/listData?client=".concat(a,"&db=").concat(r),l.next=3,fetch(t);case 3:return m=l.sent,l.next=6,m.text();case 6:return p=l.sent,D=JSON.parse(p),l.abrupt("return",D);case 9:case"end":return l.stop()}},c)})),x.apply(this,arguments)}var ae=function(a,r){var t,m,p,D=u.Z.useForm(),P=U()(D,1),l=P[0],y=(0,J.Z)(re,{defaultPageSize:15,form:l,manual:!0}),f=y.tableProps,g=y.search;return(0,e.jsxs)("div",{children:[(0,e.jsxs)(u.Z,{form:l,layout:"inline",size:"small",initialValues:{Level:-1,DateRange:[b()().subtract(1,"M"),null]},children:[(0,e.jsx)(u.Z.Item,{name:"Client",rules:[{required:!0,message:"Client is required"}],children:(0,e.jsx)(h.Z,{placeholder:"Client",dropdownMatchSelectWidth:!1,onChange:function(){var s=j()(v()().mark(function o(d){var E;return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,I(d,"");case 2:E=_.sent,l.resetFields(["DBName","TableName"]),r(T()(T()({},E),{},{Client:d,Database:"",Table:""}));case 5:case"end":return _.stop()}},o)}));return function(o){return s.apply(this,arguments)}}(),options:a==null||(t=a.Clients)===null||t===void 0?void 0:t.map(function(s){return{label:s,value:s}})})}),(0,e.jsx)(u.Z.Item,{name:"DBName",rules:[{required:!0,message:"Database is required"}],children:(0,e.jsx)(h.Z,{placeholder:"Database",dropdownMatchSelectWidth:!1,onChange:function(){var s=j()(v()().mark(function o(d){var E;return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,I(a.Client,d);case 2:E=_.sent,l.resetFields(["TableName"]),r(T()(T()({},E),{},{Database:d}));case 5:case"end":return _.stop()}},o)}));return function(o){return s.apply(this,arguments)}}(),options:a==null||(m=a.Databases)===null||m===void 0?void 0:m.map(function(s){return{label:s,value:s}})})}),(0,e.jsx)(u.Z.Item,{name:"TableName",rules:[{required:!0,message:"Table is required"}],children:(0,e.jsx)(h.Z,{placeholder:"Table",dropdownMatchSelectWidth:!1,onChange:function(){var s=j()(v()().mark(function o(d){return v()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:r(T()(T()({},a),{},{Table:d}));case 1:case"end":return O.stop()}},o)}));return function(o){return s.apply(this,arguments)}}(),options:(p=a.Tables)===null||p===void 0?void 0:p.map(function(s){return{label:s,value:s}})})}),(0,e.jsx)(u.Z.Item,{name:"Level",children:(0,e.jsxs)(h.Z,{placeholder:"Level",dropdownMatchSelectWidth:!1,children:[(0,e.jsx)(h.Z.Option,{value:-1,children:"All"}),(0,e.jsx)(h.Z.Option,{value:0,children:"Verbose"}),(0,e.jsx)(h.Z.Option,{value:1,children:"Debug"}),(0,e.jsx)(h.Z.Option,{value:2,children:"Info"}),(0,e.jsx)(h.Z.Option,{value:3,children:"Warning"}),(0,e.jsx)(h.Z.Option,{value:4,children:"Error"}),(0,e.jsx)(h.Z.Option,{value:5,children:"Fatal"})]})}),(0,e.jsx)(u.Z.Item,{name:"Message",children:(0,e.jsx)(C.Z,{placeholder:"Message"})}),(0,e.jsx)(u.Z.Item,{name:"User",children:(0,e.jsx)(C.Z,{placeholder:"User"})}),(0,e.jsx)(u.Z.Item,{name:"TraceNo",children:(0,e.jsx)(C.Z,{placeholder:"TraceNo"})}),(0,e.jsx)(u.Z.Item,{name:"Flags",children:(0,e.jsx)(w.Z,{placeholder:"Flags"})}),(0,e.jsx)(u.Z.Item,{name:"DateRange",rules:[{validator:function(o,d){return!d||!d[0]?Promise.reject(new Error("Start date is required")):Promise.resolve()}}],children:(0,e.jsx)(q,{allowEmpty:[!0,!0]})}),(0,e.jsx)(u.Z.Item,{name:"FuzzySearch",valuePropName:"checked",children:(0,e.jsx)(G.Z,{checkedChildren:"Fuzzy",unCheckedChildren:"Fuzzy"})}),(0,e.jsxs)(u.Z.Item,{children:[(0,e.jsx)(A.Z,{type:"primary",htmlType:"submit",style:{marginRight:20},onClick:g.submit,children:"Search"}),(0,e.jsx)(A.Z,{onClick:g.reset,children:"Reset"})]})]}),(0,e.jsx)("br",{}),(0,e.jsx)(Y.Z,T()({rowKey:"ID",size:"small",columns:ee,scroll:{x:!0}},f))]})};function te(){var c=(0,W.useState)({Client:"",Database:"",Table:"",Clients:[],Databases:[],Tables:[]}),a=U()(c,2),r=a[0],t=a[1];return(0,W.useEffect)(function(){I("","").then(function(m){t(m)})},[]),ae(r,t)}}}]);
